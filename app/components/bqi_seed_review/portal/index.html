<div ng-controller="Components.BqiSeedReview">

	<div>{{message}}</div>

	<div ng-if="read">

		<h3>Reviews</h3>

		<ul class="nav nav-tabs">
		  <li ng-show="write" ng-class="{active: tab == 'write'}"><a href ng-click="setTab('write')">Write Your Review</a></li>
		  <li ng-show="read" ng-class="{active: tab == 'read'}"><a href ng-click="setTab('read')">Read Others' Reviews</a></li>
		</ul>

		<form ng-if="write" ng-show="tab == 'write'" ng-submit="submit()" style="padding: 10px;">
			<ng-include src="'components/bqi_seed_review/form.html'"></ng-include>
		</form>

		<div ng-if="read" ng-show="tab == 'read'">
			<table class="table table-responsive">
				<thead>
					<tr>
						<th>Reviewer</th>
						<th>Rating</th>
						<th>Recommendation</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="(userId, review) in project.flow.stages[stage].data" ng-class="{active: userId == active}">
						<td>
							{{getUser(userId).name}}
						</td>
						<td>
							{{review.data.rating}}
						</td>
						<td>
							{{recommendations[review.data.recommendation]}}
						</td>
						<td>
							<a href ng-click="setReview(userId, review)">View Details</a>
						</td>
					</tr>
				</tbody>
				<tfoot>
					<tr class="info">
						<td></td>
						<td><b>{{avgRating}}</b></td>
						<td><b>{{avgRecommendation}}</b></td>
						<td></td>
					</tr>
				</tfoot>
			</table>


			<div ng-controller="Components.BqiSeedReview.Details">
				<div ng-if="review" class="well">
					<ng-include src="'components/bqi_seed_review/form.html'"></ng-include>
				</div>
			</div>
		</div>

	</div>
</div>